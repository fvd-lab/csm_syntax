{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "CSM",
  "patterns": [
    {
      "include": "#udp-commands"
    },
    {
      "include": "#csm-parameter-commands"
    },
    {
      "include": "#comments"
    },
    {
      "include": "#strings"
    },
    {
      "include": "#numbers"
    },
    {
      "include": "#at-variables"
    },
    {
      "include": "#function-calls"
    },
    {
      "include": "#control-keywords"
    },
    {
      "include": "#function-keywords"
    },
    {
      "include": "#operators"
    },
    {
      "include": "#variables"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.number-sign.csm",
          "begin": "#",
          "end": "$",
          "patterns": [
            {
              "name": "constant.character.escape.csm",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.csm",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.csm",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "string.quoted.single.csm",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.csm",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.float.csm",
          "match": "\\b\\d+\\.\\d+([eE][+-]?\\d+)?\\b"
        },
        {
          "name": "constant.numeric.integer.csm",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "at-variables": {
      "patterns": [
        {
          "name": "entity.name.tag.csm",
          "match": "@[a-zA-Z_][a-zA-Z0-9_]*"
        }
      ]
    },
    "udp-commands": {
      "patterns": [
        {
          "name": "meta.function-call.udparg.csm",
          "begin": "^\\s*((?i:udparg))\\s+",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.csm"
            }
          },
          "end": "(?=#|$)",
          "patterns": [
            {
              "match": "\\G([a-zA-Z_][a-zA-Z0-9_]*)",
              "captures": {
                "1": {
                  "name": "entity.name.type.csm"
                }
              }
            },
            {
              "match": "\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s+([a-zA-Z_][a-zA-Z0-9_]*)",
              "captures": {
                "1": {
                  "name": "support.type.csm"
                },
                "2": {
                  "name": "variable.other.csm"
                }
              }
            }
          ]
        },
        {
          "name": "meta.function-call.udprim.csm",
          "begin": "^\\s*((?i:udprim))\\s+",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.csm"
            }
          },
          "end": "(?=#|$)",
          "patterns": [
            {
              "match": "\\G([a-zA-Z_][a-zA-Z0-9_]*)",
              "captures": {
                "1": {
                  "name": "entity.name.type.csm"
                }
              }
            },
            {
              "match": "\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s+([a-zA-Z_][a-zA-Z0-9_]*)",
              "captures": {
                "1": {
                  "name": "support.type.csm"
                },
                "2": {
                  "name": "variable.other.csm"
                }
              }
            }
          ]
        }
      ]
    },
    "csm-parameter-commands": {
      "patterns": [
        {
          "name": "meta.function-call.parameter.csm",
          "begin": "^\\s*((?i:ATTRIBUTE|CFGPMTR|DESPMTR|OUTPMTR|PATBEG))\\s+",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.csm"
            }
          },
          "end": "(?=#|$)",
          "patterns": [
            {
              "match": "(\\$[a-zA-Z_][a-zA-Z0-9_]*)\\s+(.+?)(?=\\s*(?:#|$))",
              "captures": {
                "1": {
                  "name": "entity.name.tag.csm"
                },
                "2": {
                  "name": "string.quoted.csm"
                }
              }
            },
            {
              "match": "([a-zA-Z_][a-zA-Z0-9_]*)\\s+([-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)(?=\\s*(?:#|$))",
              "captures": {
                "1": {
                  "name": "variable.other.csm"
                },
                "2": {
                  "name": "constant.numeric.csm"
                }
              }
            },
            {
              "match": "([a-zA-Z_][a-zA-Z0-9_]*)\\s+(.+?)(?=\\s*(?:#|$))",
              "captures": {
                "1": {
                  "name": "variable.other.csm"
                },
                "2": {
                  "name": "string.quoted.csm"
                }
              }
            },
            {
              "match": "(\\$[a-zA-Z_][a-zA-Z0-9_]*)(?=\\s*(?:#|$))",
              "captures": {
                "1": {
                  "name": "entity.name.tag.csm"
                }
              }
            },
            {
              "match": "([a-zA-Z_][a-zA-Z0-9_]*)(?=\\s*(?:#|$))",
              "captures": {
                "1": {
                  "name": "variable.other.csm"
                }
              }
            }
          ]
        },
        {
          "name": "meta.function-call.geometry.csm",
          "begin": "^\\s*((?i:BOX|CYLINDER|SPHERE|CONE|TORUS|REVOLVE|ROTATEX|ROTATEY|ROTATEZ|TRANSLATE|SCALE))\\s+",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.csm"
            }
          },
          "end": "(?=#|$)",
          "patterns": [
            {
              "include": "#numbers"
            },
            {
              "include": "#operators"
            },
            {
              "include": "#variables"
            }
          ]
        },
        {
          "name": "meta.function-call.ifthen.csm",
          "begin": "^\\s*((?i:IFTHEN))\\s+",
          "beginCaptures": {
            "1": {
              "name": "keyword.control.csm"
            }
          },
          "end": "(?=#|$)",
          "patterns": [
            {
              "match": "(\\$(?:op[0-9]+|type))(?:=([a-zA-Z]+))?",
              "captures": {
                "1": {
                  "name": "keyword.operator.csm"
                },
                "2": {
                  "name": "constant.language.csm"
                }
              }
            },
            {
              "match": "\\b(lt|LT|le|LE|eq|EQ|ge|GE|gt|GT|ne|NE|or|OR|and|AND|xor|XOR)\\b",
              "captures": {
                "1": {
                  "name": "keyword.operator.csm"
                }
              }
            }
          ]
        }
      ]
    },
    "function-calls": {
      "patterns": [
        {
          "begin": "^\\s*(([aA][bB][sS]|[aA][cC][oO][sS]|[aA][sS][iI][nN]|[aA][tT][aA][nN]|[aA][tT][aA][nN]2|[cC][eE][iI][lL]|[cC][oO][sS]|[cC][oO][sS][hH]|[eE][xX][pP]|[fF][lL][oO][oO][rR]|[lL][oO][gG]|[lL][oO][gG]10|[mM][aA][xX]|[mM][iI][nN]|[mM][oO][dD]|[pP][oO][wW]|[rR][aA][nN][dD][oO][mM]|[rR][oO][uU][nN][dD]|[sS][iI][gG][nN]|[sS][iI][nN]|[sS][iI][nN][hH]|[sS][qQ][rR][tT]|[tT][aA][nN]|[tT][aA][nN][hH]|[tT][rR][iI][mM]|[pP][aA][tT][bB][eE][gG]|[pP][aA][tT][eE][nN][dD]|[dD][uU][mM][pP]|[vV][aA][lL]2[sS][tT][rR]|[sS][tT][rR]2[vV][aA][lL]|[gG][eE][tT][aA][tT][tT][rR]|[sS][eE][tT][aA][tT][tT][rR]|[aA][pP][pP][lL][yY][cC][sS][yY][sS]|[eE][vV][aA][lL][uU][aA][tT][eE]|[gG][eE][tT][bB][bB][oO][xX]|[gG][eE][tT][lL][eE][nN][gG][tT][hH]|[gG][eE][tT][aA][rR][eE][aA]|[gG][eE][tT][vV][oO][lL][uU][mM][eE]|[gG][eE][tT][mM][oO][mM][nN][tT]|[gG][eE][tT][cC][gG]|[sS][pP][lL][iI][tT]|[jJ][oO][iI][nN]|[mM][iI][rR][rR][oO][rR]|[hH][oO][lL][lL][oO][wW]|[tT][hH][iI][cC][kK][eE][nN]|[eE][xX][tT][rR][aA][cC][tT]|[rR][uU][lL][eE]|[aA][tT][tT][rR][iI][bB][uU][tT][eE]|[iI][nN][tT][eE][rR][fF][aA][cC][eE]|[pP][oO][iI][nN][tT]|[lL][iI][nN][eE]|[sS][pP][lL][iI][nN][eE]|[cC][iI][rR][aA][rR][cC]|[eE][lL][lL][iI][pP][sS][eE]|[pP][aA][rR][aA][bB][oO][lL][aA]|[hH][yY][pP][eE][rR][bB][oO][lL][aA]|[bB][oO][xX]|[cC][yY][lL][iI][nN][dD][eE][rR]|[sS][pP][hH][eE][rR][eE]|[cC][oO][nN][eE]|[tT][oO][rR][uU][sS]|[rR][uU][lL][eE][dD]|[rR][eE][vV][oO][lL][vV][eE][dD]|[nN][oO][dD][eE]|[wW][iI][rR][eE]|[sS][hH][eE][eE][tT]|[sS][oO][lL][iI][dD]|[aA]|[eE][nN][dD]|[aA][pP][pP][lL][yY][cC][sS][yY][sS]|[aA][rR][cC]|[aA][sS][sS][eE][rR][tT]|[aA][tT][tT][rR][iI][bB][uU][tT][eE]|[bB][eE][zZ][iI][eE][rR]|[bB][oO][xX]|[cC][iI][rR][aA][rR][cC]|[cC][oO][mM][bB][iI][nN][eE]|[cC][oO][nN][eE]|[cC][oO][nN][nN][eE][cC][tT]|[cC][oO][nN][pP][mM][tT][rR]|[cC][sS][yY][sS][tT][eE][mM]|[cC][yY][lL][iI][nN][dD][eE][rR]|[dD][uU][mM][pP]|[eE][vV][aA][lL][uU][aA][tT][eE]|[eE][xX][tT][rR][aA][cC][tT]|[gG][eE][tT][aA][tT][tT][rR]|[gG][rR][oO][uU][pP]|[hH][oO][lL][lL][oO][wW]|[iI][nN][tT][eE][rR][fF][aA][cC][eE]|[jJ][oO][iI][nN]|[lL][bB][oO][uU][nN][dD]|[lL][iI][nN][sS][eE][gG]|[mM][aA][cC][bB][eE][gG]|[mM][eE][sS][sS][aA][gG][eE]|[mM][iI][rR][rR][oO][rR]|[nN][aA][mM][eE]|[pP][aA][tT][bB][eE][gG]|[pP][aA][tT][bB][rR][eE][aA][kK]|[pP][oO][iI][nN][tT]|[pP][rR][oO][jJ][eE][cC][tT]|[rR][eE][cC][aA][lL][lL]|[rR][eE][oO][rR][dD][eE][rR]|[rR][oO][tT][aA][tT][eE][xX]|[rR][oO][tT][aA][tT][eE][yY]|[rR][oO][tT][aA][tT][eE][zZ]|[rR][uU][lL][eE]|[sS][kK][bB][eE][gG]|[sS][kK][cC][oO][nN]|[sS][kK][eE][nN][dD]|[sS][kK][vV][aA][rR]|[sS][oO][lL][bB][eE][gG]|[sS][oO][lL][cC][oO][nN]|[sS][pP][hH][eE][rR][eE]|[sS][pP][lL][iI][nN][eE]|[sS][sS][lL][oO][pP][eE]|[tT][oO][rR][uU][sS]|[uU][bB][oO][uU][nN][dD]|[nN][oO][dD][eE]|[wW][iI][rR][eE]|[sS][hH][eE][eE][tT]|[sS][oO][lL][iI][dD]|[aA]|[eE][nN][dD]|[aA][rR][cC]|[aA][sS][sS][eE][rR][tT]|[bB][eE][zZ][iI][eE][rR]|[cC][oO][mM][bB][iI][nN][eE]|[cC][oO][nN][nN][eE][cC][tT]|[cC][oO][nN][pP][mM][tT][rR]|[cC][sS][yY][sS][tT][eE][mM]|[gG][rR][oO][uU][pP]|[lL][bB][oO][uU][nN][dD]|[lL][iI][nN][sS][eE][gG]|[mM][aA][cC][bB][eE][gG]|[mM][eE][sS][sS][aA][gG][eE]|[nN][aA][mM][eE]|[pP][aA][tT][bB][rR][eE][aA][kK]|[pP][rR][oO][jJ][eE][cC][tT]|[rR][eE][cC][aA][lL][lL]|[rR][eE][oO][rR][dD][eE][rR]|[rR][oO][tT][aA][tT][eE][xX]|[rR][oO][tT][aA][tT][eE][yY]|[rR][oO][tT][aA][tT][eE][zZ]|[sS][kK][bB][eE][gG]|[sS][kK][cC][oO][nN]|[sS][kK][eE][nN][dD]|[sS][kK][vV][aA][rR]|[sS][oO][lL][bB][eE][gG]|[sS][oO][lL][cC][oO][nN]|[sS][sS][lL][oO][pP][eE]|[uU][bB][oO][uU][nN][dD]))\\s+",
          "beginCaptures": {
            "1": {
              "name": "entity.name.function.csm"
            }
          },
          "end": "(?=#|$)",
          "patterns": [
            {
              "include": "#function-parameters"
            }
          ]
        }
      ]
    },
    "function-parameters": {
      "patterns": [
        {
          "name": "variable.parameter.csm",
          "match": "\\$[a-zA-Z_][a-zA-Z0-9_]*"
        },
        {
          "name": "constant.numeric.parameter.csm",
          "match": "\\b[-+]?\\d+(\\.\\d+)?([eE][-+]?\\d+)?\\b"
        },
        {
          "name": "string.quoted.parameter.csm",
          "match": "\"[^\"]*\""
        },
        {
          "name": "punctuation.separator.parameter.csm",
          "match": "[=;,()]"
        },
        {
          "include": "#at-variables"
        }
      ]
    },
    "control-keywords": {
      "patterns": [
        {
          "name": "keyword.control.csm",
          "match": "\\b([cC][fF][gG][pP][mM][tT][rR]|[dD][iI][mM][eE][nN][sS][iI][oO][nN]|[dD][eE][sS][pP][mM][tT][rR]|[oO][uU][tT][pP][mM][tT][rR]|[uU][dD][pP][aA][rR][gG]|[uU][dD][pP][rR][iI][mM]|[sS][tT][oO][rR][eE]|[rR][eE][sS][tT][oO][rR][eE]|[eE][xX][tT][rR][uU][dD][eE]|[sS][eE][tT]|[mM][aA][rR][kK]|[sS][eE][lL][eE][cC][tT]|[tT][rR][aA][nN][sS][lL][aA][tT][eE]|[rR][oO][tT][aA][tT][eE]|[sS][cC][aA][lL][eE]|[uU][nN][iI][oO][nN]|[sS][uU][bB][tT][rR][aA][cC][tT]|[iI][nN][tT][eE][rR][sS][eE][cC][tT]|[fF][iI][lL][lL][eE][tT]|[cC][hH][aA][mM][fF][eE][rR]|[sS][wW][eE][eE][pP]|[rR][eE][vV][oO][lL][vV][eE]|[lL][oO][fF][tT]|[bB][lL][eE][nN][dD]|[pP][aA][tT][hH][rR][uU][lL][eE]|[iI][mM][pP][oO][rR][tT]|[cC][aA][tT][bB][eE][gG]|[cC][aA][tT][eE][nN][dD]|[iI][fF][tT][hH][eE][nN]|[eE][lL][sS][eE][iI][fF]|[eE][lL][sS][eE]|[eE][nN][dD][iI][fF]|[fF][oO][rR][eE][aA][cC][hH]|[eE][nN][dD][fF][oO][rR]|[wW][hH][iI][lL][eE]|[eE][nN][dD][wW][hH][iI][lL][eE]|[bB][rR][eE][aA][kK]|[cC][oO][nN][tT][iI][nN][uU][eE]|[tT][hH][rR][oO][wW]|[tT][rR][yY]|[cC][aA][tT][cC][hH]|[eE][nN][dD][tT][rR][yY])\\b"
        }
      ]
    },
    "function-keywords": {
      "patterns": [
        {
          "name": "entity.name.tag.csm",
          "match": "\\b(abs|acos|asin|atan|atan2|ceil|cos|cosh|exp|floor|log|log10|max|min|mod|pow|random|round|sign|sin|sinh|sqrt|tan|tanh|trim|patbeg|patend|dump|val2str|str2val|getattr|setattr|applycsys|evaluate|getbbox|getlength|getarea|getvolume|getmomnt|getcg|split|join|mirror|hollow|thicken|extract|rule|attribute|cfgpmtr|interface|point|line|spline|cirarc|ellipse|parabola|hyperbola|box|cylinder|sphere|cone|torus|ruled|revolved)\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.csm",
          "match": "[+\\-*/=<>!&|^%~]+"
        }
      ]
    },
    "variables": {
      "patterns": [
        {
          "name": "variable.other.csm",
          "match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\b"
        }
      ]
    },
    "invalid-lines": {
      "patterns": [
        {
          "name": "invalid.csm",
          "match": "^\\s*[^#\\s].*$"
        }
      ]
    }
  },
  "scopeName": "source.csm"
}